# web-server-and-chatbot

Здравствуйте! Здесь будут пояснения и комментарии ко всем файлам.

СMakeLists.txt

Это стандартный файл CMake. Его содержимое может быть полезно для тех, кто работает в CLion или другой среде, использующей CMake.
Помимо стандартных комманд здесь присутствуют необходимые для подключения библиотек JSON и uWebSockets.
Важно: сначала необходимо задать toolchain-file: (File > Settings на Windows и Linux, или CLion > Preferences на macOS),
далее > CMake settings > Build, Execution, Deployment > CMake и написать -DCMAKE_TOOLCHAIN_FILE=[путь до папки vcpkg]/scripts/buildsystems/vcpkg.cmake
JSON легко подключается с помощью find_package и target_link_libraries, однако uWebSockets не поддерживает такой способ подключения,
поэтому необходимо найти путь, подключить директории, а дальше подключить необходимые библиотеки, вручную указав путь до них (абсолютный) - см. файл.

database.txt

Это текстовый файл с вопросами и ответами чат-бота. Вопрос и ответ разделяет символ " $ ".
Его можно редактировать как и вручную, так и с помощью функции обучения чат-бота.

chatbot.h

Это файл с функциями работы чат-бота.
- Функция loadPhrases загружает содержимое текстового файла в базу данных и возвращает количество запросов, доступных боту.
- Функция savePhrases сохраняет запросы, введенные пользователем в стандартный ввод, в текстовый файл. Запросы вводятся в формате "Вопрос? - Ответ".
- Функция savePhrase сохраняет запрос, введенный при обучении пользователем чата в текстовый файл и возвращает успешность изменения.
Важно! Поскольку в CLion сборка проекта происходит не в его директории, а в папке cmake-build-debug, то в указанных относительных путях есть
переходы на директорию выше ("../"), однако в других средах разработки может быть по-другому. При запуске обязательно убедитесь,
что пути заданы правильно, и файлы открываются (на всякий случай предусмотрены сообщения об ошибках).
- Функция bot выводит сообщения бота в стандартный вывод
- Функция chat_bot выводит возвращает ответ на заданыый вопрос, а также выводит его в стандартный вывод
- Функция greeting приветствует пользователя от лица бота
- Функция train запускает процесс обучения бота с помощью функции savePhrases

process.h

Функция status возвращает статус пользователя.
Функция proccess message обрабатывает сообщения, отправленные пользователем:
- При отправке сообщения чат-боту пользователю приходит сообщение с ответом на заданный вопрос. Ответ также выводится в стандартный вывод
- При отправке сообщения другому пользователю сначала проверяется существует ли данный пользователь, и в случае ошибки пользователю приходит
сообщение о ней + выводится сообщение в стандартный вывод, а в случае успеха сообщение уходит другому пользователю.
- При попытке задать имя происходит проверка на соответсвие стандартам (не более 255 символов и отсутствие символа "::"). В случае успеха пользователю
приходит сообщение об изменении имени (также теперь при выводе сообщений данного пользователя в стандартный вывод используется его имя). В случае ошибки
пользователю приходит сообщение об ошибке. Оба сообщения дублируются в стандартный вывод.
- Можно также обучать бота отдельной командой при отправке сообщения.

main.cpp

Функция main обеспечивает основыную работу программы:
- При запуске программы можно обучить чат-бота новым взаимодействиям при помощи стандартного ввода-вывода.
- При запуске сервера подключается чат-бот и выводит приветствие в стандартный вывод. 
- При подключении нового пользователя сообщение о его подключении и количество текущих подключенных пользователей выводятся в стандартный вывод.
- Также при подключении ему приходит сообщение о текущих пользователях.
- При отправке сообщения оно также выводится в стандартный вывод в формате string_view
- При отключении пользователя сообщение об этом выводится в стандартный вывод.

